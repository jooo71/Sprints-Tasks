/*
 * card.c
 *
 *  Created on: Aug 15, 2023
 *      Author: PC
 */


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
//#include <stdint.h>
#include "card.h"


EN_cardError_t getCardHolderName(ST_cardData_t *cardData)
{

    printf("enter your name\n");
    fflush(stdout);
    fgets(cardData->cardHolderName, 26, stdin); // size of :length of array
    uint8_t len = strlen(cardData->cardHolderName);
    uint8_t size = sizeof(cardData->cardHolderName);

    if (len == Null || (len - 1) < 20 || len >= size)
    {
        return WRONG_NAME;
    }
//    printf("%d\n", len);
//    printf("%d\n", size);
    return CARD_OK;

}

EN_cardError_t getCardExpiryDate(ST_cardData_t *cardData)
{
    printf("enter your CardExpiryDate\n");
    fflush(stdout);
    fflush(stdin);
    fgets(cardData->cardExpirationDate, 8, stdin); // size of :length of array
    uint8_t len = strlen(cardData->cardExpirationDate);
    uint8_t size = sizeof(cardData->cardExpirationDate);

    if (len == Null || (len - 1) < 5 || len > size)
    {
        return WRONG_EXP_DATE;
    }

    return CARD_OK;
}

EN_cardError_t getCardPAN(ST_cardData_t *cardData)
{
    printf("enter your Primary Account Number\n");
    fflush(stdout);

    fgets(cardData->primaryAccountNumber, 22, stdin); // size of :length of array

    uint8_t len = strlen(cardData->primaryAccountNumber);
    uint8_t size = sizeof(cardData->primaryAccountNumber);
//    printf("%d\n", len);
//    printf("%d\n", size);

    if (len == Null || (len - 1) < 16 || len > size)
    {
        return WRONG_PAN ;
    }

    return CARD_OK;
}

